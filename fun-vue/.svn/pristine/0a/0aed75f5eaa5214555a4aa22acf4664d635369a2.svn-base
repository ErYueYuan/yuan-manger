!function(a){a.fn.spinner=function(t){return this.each(function(){function e(a){v.val(u()+a),n(v)}function n(a){clearTimeout(c.data("timeout"));var t=i(a);l(t)||v.trigger("update",[a,t])}function i(a){var e=u();if(e<=r.min?m.attr("disabled","disabled"):m.removeAttr("disabled"),a.toggleClass("invalid",l(e)).toggleClass("passive",0===e),l(e)){var n=setTimeout(function(){v.val(c.data("lastValidValue")),i(a)},500);c.data("timeout",n)}else c.data("lastValidValue",t.max);return e}function l(a){return isNaN(+a)||a<r.min||a>r.max}function u(a){return a=a||v,parseInt(a.val()||0,10)}var s=this.value,d={value:s,min:0},r=a.extend(d,t),o={up:38,down:40},c=a("<div></div>");c.addClass("spinner");var v=a(this).addClass("value").val(r.value).bind("keyup paste change",function(t){var i=a(this);t.keyCode==o.up?e(1):t.keyCode==o.down?e(-1):u(i)!=c.data("lastValidValue")&&n(i)});v.wrap(c);var f=a('<button class="increase">+</button>').click(function(){t.max>v.val()&&e(1)}),m=a('<button class="decrease">-</button>').click(function(){e(-1)});i(v),c.data("lastValidValue",r.value),v.before(m),v.after(f)})}}(jQuery);