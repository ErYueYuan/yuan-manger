<template>
    <div class="fun-panel clearfix">
        <div class="in-nav-bot posi1 " style="bottom: 0px;" >
            <div class=" c-p " @click="addFriend()"><b class="four"></b><p class="f1 t-center c6">添加好友</p></div>
            <div class=" c-p " @click="toTalk()"><b class="one"></b><p class="f1 t-center c6">客户沟通</p></div>
            <div class=" c-p pad0" @click="call()">
                <b class="two"></b><p class="f1 t-center c6">电话</p>
            </div>
            <div class=" c-p pad0" @click="plan()">
                <b class="three"></b><p class="f1 t-center c6">制作方案</p>
            </div>
            <div class="bbtn t-right c-p" @click="$router.push({path:'/productList'})">
                <span class="hx-bt3 bt1 f3 ">投保</span>
            </div>
        </div>
        <div class="mask-layer z23" v-if="isPhone" @click="closed()"></div>
        <div class="pop-box" v-if="isPhone">
            <h3 class="tit c6 f4 t-center"></h3>
            <div class="pad5-11 f2-1 c5 t-center"><label><input type="radio" />普通电话 {{customerDetail.mobile}}</label></div>
            <div class="row mar0 border-t">
                <div class="col-6 t-center f4 c-p c8 pad6-1 border-r" @click="onTel(customerDetail.mobile)">电话</div>
                <div class="col-6 t-center f4 c-p c8 pad6-1" @click="onTel(customerDetail.mobile)">网络电话</div>
            </div>
        </div>

        <!-- 添加好友弹框 -->
        <div class="mask-layer z23" v-if="isAddFriend" @click="closed()"></div>
        <div class="pop-box" v-if="isAddFriend">
            <h3 class="tit c6 f4 t-center mar6-2 mar7 border-b1">添加好友</h3>
            <h3 class=" c6 f3 t-left pad1-3">选择加粉号：</h3>
            <section class="clearfix">
                <div id="chatMem2" class="swiper-container">
                    <div class="swiper-wrapper f-flex" style="overflow-x: scroll;">
                        <!-- <van-tabs title-active-color="#fff" v-model="active" @click="handleClickTag">
                            <van-tab
                                :scrollspy="true"
                                v-for="(item, index) in tabList"
                                :key="index"
                                :title="item.tagName">
                            </van-tab>
                        </van-tabs> -->
                        <div class="swiper-slide active">
                            <img src="../../assets/img/szxx/me.png"/>
                            <span>泛华</span>
                            <div class="bar" title="当前"></div>
                        </div>
                        <div class="swiper-slide">
                            <img src="../../assets/img/szxx/papa.png"/>
                            <span>泛华</span>
                            <div class="bar" title="当前"></div>
                        </div>
                        <div class="swiper-slide">
                            <img src="../../assets/img/szxx/mama.png"/>
                            <span>泛华</span>
                            <div class="bar" title="当前"></div>
                        </div>
                        <div class="swiper-slide">
                            <img src="../../assets/img/szxx/mama.png"/>
                            <span>泛华</span>
                            <div class="bar" title="当前"></div>
                        </div>
                        <div class="swiper-slide">
                            <img src="../../assets/img/szxx/mama.png"/>
                            <span>泛华</span>
                            <div class="bar" title="当前"></div>
                        </div>
                        <div class="swiper-slide">
                            <img src="../../assets/img/szxx/mama.png"/>
                            <span>泛华</span>
                            <div class="bar" title="当前"></div>
                        </div>
                        <div class="swiper-slide">
                            <img src="../../assets/img/szxx/mama.png"/>
                            <span>泛华</span>
                            <div class="bar" title="当前"></div>
                        </div>
                    </div>
                </div>
            </section>
            <section class="mar6-4 border-t">
                <dl class="per-box52 no-p border-b">
                    <dt class="dt1 c6 f3-1">对方号码：</dt>
                    <dd class="dd1 t-left f3 c6 clearfix"><input type="text" class="ca-input  t-left" placeholder="请输入手机号和微信号（必填）"></dd>
                </dl>
                <dl class="per-box52 no-p border-b">
                    <dt class="dt1 c6 f3-1">打招呼：</dt>
                    <dd class="dd1 t-left f3 c6 clearfix"><input type="text" class="ca-input  t-left" placeholder="请输入问候语（必填）"></dd>
                </dl>
                <dl class="per-box52 no-p border-b">
                    <dt class="dt1 c6 f3-1">备注：</dt>
                    <dd class="dd1 t-left f3 c6 clearfix"><input type="text" class="ca-input  t-left" placeholder=""></dd>
                </dl>
            </section>
            <div class=" pad5  t-center ">
                <button type="button" class="hx-bt2 f3 t-center">请求添加好友</button>
            </div>
        </div>
        <!--  -->
    </div>
</template>
<script>
    import Vue from 'vue'
    import { mapGetters } from 'vuex'
    import * as tool from '@/common/Tool'
    import { api_sell } from '@/api/index'
    import { Tab, Tabs } from 'vant'

    Vue.use(Tab)
    Vue.use(Tabs)

    export default {
        name: "CustomerFooterPanel",
        props:{
            customerid: String
        },
        data () {
            return {
                isPhone: false,
                isAddFriend: false,
                customerDetail: [],
                tabList: [
                    {
                        id: '0',
                        innerCode: '0',
                        tagName: '泛华'
                    },
                    {
                        id: '1',
                        innerCode: '1',
                        tagName: '泛华'
                    },
                    {
                        id: '2',
                        innerCode: '2',
                        tagName: '泛华'
                    },
                    {
                        id: '3',
                        innerCode: '3',
                        tagName: '泛华'
                    },
                    {
                        id: '4',
                        innerCode: '4',
                        tagName: '泛华'
                    },
                    {
                        id: '5',
                        innerCode: '5',
                        tagName: '泛华'
                    },
                    {
                        id: '6',
                        innerCode: '6',
                        tagName: '泛华'
                    },
                    {
                        id: '7',
                        innerCode: '7',
                        tagName: '泛华'
                    },
                    {
                        id: '8',
                        innerCode: '8',
                        tagName: '泛华'
                    }
                ],
                active: 0,
                tagIndex: '1',
            }
        },
        computed: {
            ...mapGetters(['user']),
        },
        created () {
            console.log('customerid',this.customerid)
            this.getCustomerDetail();
        },
        mounted () {

        },
        methods: {
            getCustomerDetail (clientId) {
                const _data = {
                    saasId: tool.app.saasId,
                    clientId: !!clientId ? clientId : this.clientId
                }
                api_sell.getCustomerDetail(_data).then(data => {
                    if (data.status == tool.rtCode.status) {
                        this.customerDetail = data.customerDetail;
                        this.customerDetail.mobile = data.customerDetail.mobile;
                    } else {
                        tool.toastMessage(data.message, 'error');
                    }
                })
            },

            handleClickTag (index, title) {
                console.log('index',index)
                console.log('title',title)
                // this.tagIndex = this.tabList[index].innerCode
                // if (this.tagIndex == '1') {
                    
                // } else if (this.tagIndex == '2') {
                    
                // } else if (this.tagIndex == '3') {
                    
                // } else if (this.tagIndex == '4') {
                    
                // } else if (this.tagIndex == '5') {
                    
                // }
            },
            
            plan () {
                const channelUserId = this.user.userInfo.mobile || this.user.userInfo.agentcode,
                    identificationStatus = this.user.userInfo.status || ''
                window.location.href = tool.app.lzgUrl + '#/source/channelUserId=' + channelUserId + '&opType=5&status=' + identificationStatus
            },

            call () {
                this.isPhone = true;
            },

            onTel (mobile) {
                if (!mobile)return;
                window.location.href = "tel://" + mobile;
            },


            addFriend () {
                this.isAddFriend = true;
            },

            toTalk () {
                // this.$router.push({ path: '/messWindow/' + this.clientId + '/' + this.openid + '/' + this.appid });//id都是这个客户的id
                this.$router.push({ path: '/messWindow/222222222/oFxXqs-PIyfG6xMVVYstvM0qQWX8/wxcf734e49812941a2' });
            },

            closed () {
                this.isPhone = false;
                this.isAddFriend = false;
            },
        }
    }
</script>

<style scoped>

</style>
