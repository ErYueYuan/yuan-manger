<template>
    <div class="my-n-txtbox s-bg posi2">
        <div class="add-btn c7 t-center f1 c-p" style="border-radius: 6px 0 0 15px;" @click="addRecord()">新增跟进记录</div>
        <div class="top-one  clearfix" >
            <div class=" pad3 right-box posi2 c7 " >
                <h3 class=" f3 c-p"><span>{{nikeName}}</span>
                </h3>
                <div class="f2 c7 per-info mar3 ">
                    <b class="one"></b>来源：
                    <span v-if="getSource == 1">系统分配</span>
                    <span v-if="getSource == 2">主动取数</span>
                    <span v-if="getSource == 3">自建客户</span>
                    <span v-if="getSource == 4">成交客户</span>
                </div>
                <div class="f2 c7 per-info  ">
                    <b class="two"></b>归属运营号：{{affiliation}}
                </div>
                <div class="f2 c7 per-info  ">
                    <b class="three"></b>客户等级：
                    <span class="stars-box2" v-if="customerStar == 1"><i></i></span>
                    <span class="stars-box2" v-if="customerStar == 2"><i></i><i></i></span>
                    <span class="stars-box2" v-if="customerStar == 3"><i></i><i></i><i></i></span>
                    <span class="stars-box2" v-if="customerStar == 4"><i></i><i></i><i></i><i></i></span>
                    <span class="stars-box2" v-if="customerStar == 5"><i></i><i></i><i></i><i></i><i></i></span>
                </div>
            </div>
            <div class="img-box  posi2">
                <img v-if="!!sex && sex == 1" src="../../assets/img/szxx/me.png" />
                <img v-if="!!sex && sex == 0" src="../../assets/img/szxx/dau.png" />
            </div>
        </div>
    </div>
</template>
<script>
    import * as tool from '@/common/Tool'
    import { api_sell } from '@/api/index'

    export default {
        name: "CustomerFooterPanel",
        props:{
            customerid: String,
            faclientid: String
        },
        data () {
            return {
                nikeName: "",
                sex: "",//1男，0女，2未知
                affiliation: "",
                getSource: "",
                customerStar: "",
            }
        },
        created () {
            this.queryBasicIntroduction();
        },
        mounted(){
            console.log('父级customerid',this.customerid)
            console.log('父级abcid',this.faclientid)
        },
        methods: {
             queryBasicIntroduction () {
                const _data = {
                    saasId: tool.app.saasId,
                    resultId: this.customerid
                }
                api_sell.queryBasicIntroduction(_data).then(data => {
                    if (data.status == tool.rtCode.status) {
                        this.nikeName = data.nikeName;
                        this.sex = data.sex;
                        this.getSource = data.getSource;
                        this.customerStar = data.customerStar;
                        this.cerCode = data.cerCode;
                        this.affiliation = data.affiliation;
                    } else {
                        tool.toastMessage(data.message, 'error');
                    }
                })
            },

            addRecord () {
                // this.$router.push({ name: 'followRecord',params: {// clientId,resultId,followUpId,add
                //     p: this.faclientid,
                //     q: this.customerid,
                //     r: 'nofollowupod',
                //     s: 'add'
                // } })
                this.$router.push({ name: 'followRecord',params: {// resultId,followUpId,add
                    q: this.customerid,
                    r: 'nofollowupod',
                    s: 'add'
                } })
            },
        },
    }
</script>

<style scoped>

</style>